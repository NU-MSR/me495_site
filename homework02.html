<!-- Generated with pandoc -D html
Modified by Matthew Elwin.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<meta name="author" content="Matthew Elwin" />
<title>Homework 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
<!--[if lt IE 9]>
<script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
<![endif]-->
<style type="text/css">
/*
Matthew Elwin
css for the nume template for making websites

Contains code modified from with https://gist.github.com/killercup/5917178
Mostly using the aesthetics from above, but added a table of contents menu to the left.
When printing, the menu will be hidden

*/


nav#TOC{
    width: 20%;
    height: 100%;
    position:fixed!important;
    z-index:1;
    overflow:auto;
    padding-right: 2em;
}

.home_up{
    position: fixed;
    right: 0.25em;
    top: 0.25em;
}
.content{
    margin-left: 21%;
    padding-left: 4em;
}

.inner{
    margin: 0 auto;
    min-width: 30em;
    max-width: 50em;
}

.no-foot{
    min-height: 100vh 
}

.container:after,.container:before{content:"";display:table;clear:both}

.footer {
    font-size: 9pt
}

html {
  font-size: 100%;
  overflow-y: scroll;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  padding: 0;
}

body {
  font-family: "DejaVu Serif", Georgia, Palatino, 'Palatino Linotype', Times, 'Times New Roman', serif;
  font-size: 12px;
  line-height: 1.7;
  padding: 1em;
  background: #fefefe;
}

a {
  color: #0645ad;
  text-decoration: none;
}

a:visited {
  color: #0b0080;
}

nav a:visited {
    color: #0645ad;
}

a:hover {
  color: #06e;
}

nav a:hover {
    color: #0645ad;
    background: #C3C3DE
}

a:active {
  color: #faa700;
}

a:focus {
  outline: thin dotted;
}

*::-moz-selection {
  background: rgba(255, 255, 0, 0.3);
  color: #000;
}

*::selection {
  background: rgba(255, 255, 0, 0.3);
  color: #000;
}

a::-moz-selection {
  background: rgba(255, 255, 0, 0.3);
  color: #0645ad;
}

a::selection {
  background: rgba(255, 255, 0, 0.3);
  color: #0645ad;
}

p {
  margin: 1em 0;
}

img {
  max-width: 100%;
}

h1, h2, h3, h4, h5, h6 {
  color: #111;
  line-height: 125%;
  margin-top: 1em;
  font-weight: normal;
}

h4, h5, h6 {
  font-weight: bold;
}

h1 {
  font-size: 2.5em;
}

h1.title {
    margin-top: 0em;
    font-size: 3em;
}

h2 {
  font-size: 2em;
}

h3 {
  font-size: 1.5em;
}

h4 {
  font-size: 1.2em;
}

h5 {
  font-size: 1em;
}

h6 {
  font-size: 0.9em;
}

blockquote {
  color: #666666;
  margin: 0;
  padding-left: 3em;
  border-left: 0.5em #EEE solid;
}

hr {
  display: block;
  height: 2px;
  border: 0;
  border-top: 1px solid #aaa;
  border-bottom: 1px solid #eee;
  margin: 1em 0;
  padding: 0;
}

pre, code, kbd, samp {
    color: #000;
    background-color: #f0f0f0;
  border: 1px solid #e1e4e5;
  font-family: monospace, monospace;
  _font-family: 'courier new', monospace;
  font-size: 0.98em;
}

.line-block {
    color: #000;
    background-color: #f0f0f0;
    border: 1px solid #e1e4e5;
}
/* this style is used for inline code blocks 
it is overwridden when inside a pre format block*/
code {
    padding: 0 5px;
    white-space: nowrap;
    font-size: 85%
}

pre {
  white-space: pre;
  white-space: pre-wrap;
  word-wrap: break-word;
}

pre code {
    padding: 0 0;
    white-space: inherit;
    border: 0
}

b, strong {
  font-weight: bold;
}

dfn {
  font-style: italic;
}

ins {
  background: #ff9;
  color: #000;
  text-decoration: none;
}

mark {
  background: #ff0;
  color: #000;
  font-style: italic;
  font-weight: bold;
}

sub, sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

sup {
  top: -0.5em;
}

sub {
  bottom: -0.25em;
}

ul, ol {
  margin: 1em 0;
  padding: 0 0 0 2em;
}

li > ul, li > ol {
    margin: 0 0;
}

nav ul, nav ol {
    list-style: none;
    padding: 0 0 0 0;
}

/* make the top level list item in table of contents not indent*/
nav li > ul, nav li > ol {
    list-style: none;
    padding: 0 0 0 2em;
}

li p:last-child {
  margin-bottom: 0;
}

ul ul, ol ol {
  margin: .3em 0;
}

dl {
  margin-bottom: 1em;
}

dt {
  font-weight: bold;
  margin-bottom: .8em;
}

dd {
  margin: 0 0 .8em 2em;
}

dd:last-child {
  margin-bottom: 0;
}

img {
  border: 0;
  -ms-interpolation-mode: bicubic;
  vertical-align: middle;
}

figure {
  display: block;
  text-align: center;
  margin: 1em 0;
}

figure img {
  border: none;
  margin: 0 auto;
}

figcaption {
  font-size: 0.8em;
  font-style: italic;
  margin: 0 0 .8em;
}

table {
  margin-bottom: 2em;
  border-bottom: 1px solid #ddd;
  border-right: 1px solid #ddd;
  border-spacing: 0;
  border-collapse: collapse;
}

table th {
  padding: .2em 1em;
  background-color: #eee;
  border-top: 1px solid #ddd;
  border-left: 1px solid #ddd;
}

table td {
  padding: .2em 1em;
  border-top: 1px solid #ddd;
  border-left: 1px solid #ddd;
  vertical-align: top;
}

.author {
  font-size: 1.2em;
}

/* When the screen gets too narrow, hide the toc*/
@media only screen and (max-width: 768px) {
    nav {
        visibility: hidden
    }
    .content {
        margin-left: 0;
    }
}

@media only screen and (min-width: 480px) {
  body {
      font-size: 14px;
  }
}
@media only screen and (min-width: 768px) {
  body {
    font-size: 16px;
  }
}
@media print {
  * {
    background: transparent !important;
    color: black !important;
    filter: none !important;
    -ms-filter: none !important;
  }

  nav {
      visibility: hidden;
  }

  .content{
      margin-left: 0%;
      padding-left: 10px;
  }

  body {
    font-size: 10pt;
    max-width: 100%;
  }

  a, a:visited {
    text-decoration: underline;
  }

  hr {
    height: 1px;
    border: 0;
    border-bottom: 1px solid black;
  }

  a[href]:after {
    content: " (" attr(href) ")";
  }

  abbr[title]:after {
    content: " (" attr(title) ")";
  }

  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after {
    content: "";
  }

  pre, blockquote {
    border: 1px solid #999;
    padding-right: 1em;
    page-break-inside: avoid;
  }

  tr, img {
    page-break-inside: avoid;
  }

  img {
    max-width: 100% !important;
  }

  @page :left {
    margin: 15mm 20mm 15mm 10mm;
}

  @page :right {
    margin: 15mm 10mm 15mm 20mm;
}

  p, h2, h3 {
    orphans: 3;
    widows: 3;
  }

  h2, h3 {
    page-break-after: avoid;
  }
}


</style>
</head>
<body>

<!-- Sidebar for table of contents -->
<nav id="TOC" role="doc-toc">
<h3>Table of Contents</h3>
<ul>
<li><a href="#logistics">Logistics</a><ul>
<li><a href="#setup-and-documentation">Setup and Documentation</a></li>
<li><a href="#git-usage">Git Usage</a></li>
<li><a href="#coding-guidelines">Coding Guidelines</a></li>
<li><a href="#submission-instructions">Submission Instructions</a></li>
<li><a href="#grading">Grading</a></li>
</ul></li>
<li><a href="#turtle-trajectory">Turtle Trajectory</a><ul>
<li><a href="#git">Git</a></li>
<li><a href="#what-to-turn-in">What to turn in:</a></li>
<li><a href="#hints">Hints</a></li>
</ul></li>
<li><a href="#robot-arm">Robot ARM</a><ul>
<li><a href="#git-1">Git</a></li>
<li><a href="#what-to-turn-in-1">What to turn in</a></li>
</ul></li>
<li><a href="#the-xacro-arm">The Xacro Arm</a><ul>
<li><a href="#git-2">Git</a></li>
<li><a href="#what-to-turn-in-2">What to turn in</a></li>
</ul></li>
<li><a href="#bonus-question-optional-but-it-will-be-rewarding-to-complete">Bonus Question (optional, but it will be rewarding to complete)</a></li>
</ul>
</nav>

<nav class="home_up">
  <a href="index.html">Home</a>
</nav>
<div class="content">
  <div class="inner">
    <div class="no-foot">
<!-- Put the header to the right of the table of contents -->
<header id="title-block-header">
<h1 class="title">Homework 2</h1>
</header>

<!-- The main content of the file -->
<h1 id="logistics">Logistics</h1>
<p>This homework contains several tasks that will all be completed in a single git repository corresponding to a single ROS package.</p>
<h2 id="setup-and-documentation">Setup and Documentation</h2>
<ol>
<li>Create a git repository using the link provided in Canvas.
<ul>
<li>The repository will contain all the source code for your package</li>
<li>It will also include a <code>README.md</code></li>
</ul></li>
<li>Your <code>README.md</code> should contain the following:
<ol>
<li>YOUR FULL NAME.</li>
<li>A section for each of the three main tasks: Turtle Trajectory, Robot ARM, and The Xacro Arm. These sections should provide an overview of the files needed to run your code for that section, answer any questions, include any requested documentation or links to videos, etc.</li>
<li>Format your <code>README.md</code> using markdown: see <a href="https://guides.github.com/features/mastering-markdown/">this guide</a>. Some text editors like <code>atom</code> or <code>vscode</code> will preview markdown for you locally. You can also use tools like <code>markdown</code> or <code>pandoc</code> to generate <code>.html</code> from <code>.md</code> files.</li>
</ol></li>
<li>Each node that you write should start with a python docstring describing its ROS API:
<ol>
<li>What topics are published, their type, and what they do.</li>
<li>What topics are subscribed to, their type, and what the data is used for.</li>
<li>What services are offered, their type, and what they do</li>
<li>What parameters are used, their type, and what they do.</li>
<li>Take inspiration from <code>crazy_turtle/mover</code></li>
</ol></li>
</ol>
<h2 id="git-usage">Git Usage</h2>
<p>During this assignment, pay close attention to how you use <code>git</code>.</p>
<ol>
<li>You should have multiple commits with meaningful commit messages.</li>
<li>For the purposes of this class, you should feel free to experiment on your development branches.
<ul>
<li>If you are struggling through fixing a tough bug, even if it is just a python syntax error you can have multiple commits on your development branch with your attempts to fix the bug</li>
<li>No minor change is too small to commit on your development branch</li>
<li>Committing often frees you to experiment while knowing you can always revert the code.</li>
</ul></li>
<li>Push your development branches and your master branch to submit the assignment</li>
<li>You may merge into your master branch whenever your code
<ul>
<li>compiles cleanly with catkin_make</li>
<li>runs without any python syntax errors</li>
<li>it need not actually accomplish the required task, but it should at least run</li>
<li>Essentially your development branch can contain code in all states of disrepair. The latest commit on master should contain code that I can checkout and at least have it compile and run cleanly.</li>
</ul></li>
<li>Maintain a <code>.gitignore</code> file to prevent improperly tracked files.
<ol>
<li>There should be no backup files your text editor created (such as <code>file.py~</code> or <code>.#file</code>).</li>
<li>There should be no python bytecode files (<code>file.pyc</code>) committed.</li>
<li>There should be no files that are not explicitly created by you as part of your package. There may be explicit exceptions to this for the purpose of submitting your results to me.</li>
</ol></li>
<li>Refer to the <a href="https://git-scm.com">Git Book</a> for more information on how to use <code>git.</code></li>
<li>I recommend sticking with the command line, at least until you are comfortable with <code>git.</code></li>
<li>Remember, your git repository is a directory in your <em>source space</em> (i.e., it should be under <code>ws/src/repository</code>. Your git repository should not contain other git repositories, your build space, your devel space, or any files created by <code>catkin_make</code></li>
</ol>
<h2 id="coding-guidelines">Coding Guidelines</h2>
<ol>
<li>You are not permitted to use ANY global variables in your final submission.</li>
<li>You should try to follow the <a href="https://www.python.org/dev/peps/pep-0008/">PEP8</a> Style guidelines.</li>
<li>It is also a good habit to write docstrings for each of the classes and functions you write.
<ul>
<li>A brief description of what the class or function does</li>
<li>What the arguments are</li>
<li>What the return value is</li>
<li>What exceptions may be raised</li>
<li>See the <a href="http://google.github.io/styleguide/pyguide.html">Google Python Style Guide</a> (specifically the section on docstrings).</li>
</ul></li>
</ol>
<h2 id="submission-instructions">Submission Instructions</h2>
<p>Push your package to the remote <code>git</code> repository that was created from the GitHub classroom link. Be sure your latest work is on the <code>master</code> branch and that you push all other branches and tags as requested.</p>
<h2 id="grading">Grading</h2>
<p>You will be graded based on</p>
<ol>
<li>Your source code working.</li>
<li>Your <code>README.md</code> and your answers to the questions.</li>
<li>The documentation you include in your source code.</li>
<li>Your git usage.</li>
</ol>
<h1 id="turtle-trajectory">Turtle Trajectory</h1>
<p>The turtle in <code>turtlesim</code> can be modeled as a kinematic car (also known as a unicycle model). The control inputs for the turtle are the linear velocity <span class="math inline">\(v\)</span> and the angular velocity <span class="math inline">\(\omega\)</span> and result in motion according to <span class="math display">\[
\dot{x} = v \cos \theta \\
\dot{y} = v \sin \theta \\
\dot{\theta} = \omega.
\]</span></p>
<p>Your goal is to make the turtle follow a circular trajectory <span class="math display">\[
x_d(t) = r \cos \frac{2 \pi t}{T} + C_x\\
y_d(t) = r \sin \frac{2 \pi t}{T} + C_y,
\]</span> where <span class="math inline">\(T\)</span> is the time to finish one circle, <span class="math inline">\((C_x, C_y)\)</span> is the center of the circle, and <span class="math inline">\(r\)</span> is the radius of the circle.</p>
<h2 id="git">Git</h2>
<ul>
<li>Develop this problem on a branch called "turtle". You can also use other feature branches if you want, but you should merge them into turtle and delete them when done.</li>
<li>Be sure to push your turtle branch to the remote so I can see it.</li>
<li>When you are done with this task, merge your turtle changes into master.</li>
<li>You may also merge periodically, as you achieve milestones in getting your turtle working</li>
</ul>
<h2 id="what-to-turn-in">What to turn in:</h2>
<ol>
<li>A node that causes turtle1 to move in a circular trajectory.
<ul>
<li>The node should also respond to a service that pauses/resumes the motion of the turtle.</li>
</ul></li>
<li>A launchfile that starts the turtle simulation and the node that moves the turtle
<ul>
<li>The launchfile should include an option to run rqt_plot and show the turtle's x and y position vs time</li>
</ul></li>
<li>Use a <code>circle.yaml</code> file to stores the parameters that define the trajectory (<span class="math inline">\(T\)</span>, <span class="math inline">\(r\)</span>, <span class="math inline">\(C_x\)</span>, and <span class="math inline">\(C_y\)</span>). Your launchfile should load these values from your <code>circle.yaml</code> and the <code>traj_gen</code> node should load these values from the parameter server and use them to follow the trajectory.</li>
<li>An explanation of how to use your code in your <code>README.md</code></li>
<li>A screencast of your turtle completing one full circle (you choose the parameters and store them in <code>circle.yaml</code>). The turtle should be paused once during the trajectory. Upload the screencast and link to it in your <code>README.md</code>.</li>
<li>Include a write-up of any math you did to accomplish the task. This can be made with latex as a pdf, a scanned copy of handwritten notes, or embedded in your <code>README.md</code> using something like <a href="https://github.com/leegao/readme2tex">readme2tex</a>. It is also helpful to refer to your calculations in comments where you implement the math.</li>
<li>A screenshot from <code>rqt_plot</code> showing the x and y position of the turtle over time.</li>
</ol>
<h2 id="hints">Hints</h2>
<ol>
<li>To accomplish this task, you will take advantage of the <em>differential flattness</em> property of the system. Feel free to research on your own and cite any sources. I provide a practical guide below. The goal is to express the control inputs <span class="math inline">\(v\)</span> and <span class="math inline">\(\omega\)</span> in terms of the trajectory and it's derivatives.</li>
<li>We want to solve for <span class="math inline">\(v\)</span> and <span class="math inline">\(\omega\)</span>, given the desired trajectory. Some hints are below
<ol>
<li>Use the turtle motion equations to solve for <span class="math inline">\(\theta\)</span> in terms of <span class="math inline">\(\dot{x}\)</span> and <span class="math inline">\(\dot{y}\)</span> (and eliminate <span class="math inline">\(v\)</span>).</li>
<li>Differentiate the trajectory with respect to <span class="math inline">\(t\)</span>, to give you the desired <span class="math inline">\(\dot{x}\)</span> and <span class="math inline">\(\dot{y}\)</span> values.</li>
<li>You will also need the second derivative of the reference trajectory with respect to <span class="math inline">\(t\)</span>.</li>
<li>You can use your equation for <span class="math inline">\(\theta\)</span> and the dynamic equations to solve for <span class="math inline">\(v\)</span>
<ul>
<li>There are two equivalent equations for <span class="math inline">\(v\)</span>. Both have a singularity (divide-by-zero) at some angles of <span class="math inline">\(\theta\)</span></li>
<li>By substituting your equation for <span class="math inline">\(\theta\)</span> into each of these equations and simplifying, you can show that these two equations are the same and also remove the divide-by-zero singularity.</li>
</ul></li>
<li>Use the reference trajectory derivatives to solve for <span class="math inline">\(\theta\)</span>.</li>
<li>Substitute the equation for <span class="math inline">\(\theta\)</span> into the dynamics to solve for <span class="math inline">\(v\)</span></li>
<li>Differentiate the equation for <span class="math inline">\(\theta\)</span> to find <span class="math inline">\(\omega\)</span></li>
<li>You should now have equations for <span class="math inline">\(v\)</span> and <span class="math inline">\(\omega\)</span> in terms of <span class="math inline">\(t\)</span>.</li>
<li>You may also need the second derivatives of the trajectory to find <span class="math inline">\(\omega\)</span>, depending on how you derive the equations.</li>
<li>If you write functions to compute each of the derivatives, you can break your code into smaller pieces to make it easier to debug and test.</li>
</ol></li>
<li>Use a timer running at a specified frequency to publish the velocity commands to the turtle.
<ul>
<li>Since the trajectory is continuous but you are sending discrete commands, you need the timer to publish fast enough relative to the turtle's speed to follow the circle effectively.</li>
</ul></li>
<li>When your node starts up, it should teleport the turtle to a position at the beginning of the trajectory</li>
<li>ROS offers some standard services in the <a href="https://wiki.ros.org/std_srvs">std_srvs</a> package. You can (but need not) use <code>std_srvs/Empty</code> to create an empty service that is used to trigger pausing and resuming the turtle's movement.</li>
</ol>
<h1 id="robot-arm">Robot ARM</h1>
<p>In this section you will be creating a URDF for the robot arm shown below, visualizing it in rviz, and then making it follow trajectories.</p>
<figure>
<img src="./twolink.png" alt="A 2 - link robot arm. The length of the upper and lower links are L_1 and L_2." /><figcaption>A 2 - link robot arm. The length of the upper and lower links are <span class="math inline">\(L_1\)</span> and <span class="math inline">\(L_2\)</span>.</figcaption>
</figure>
<h2 id="git-1">Git</h2>
<ul>
<li>Do your work in this section on the "urdf" branch in git.</li>
<li>Be sure to push this branch to the remote repository.</li>
<li>When you are done, merge this into master</li>
<li>You may also merge periodically, as you achieve milestones in getting your turtle working</li>
</ul>
<h2 id="what-to-turn-in-1">What to turn in</h2>
<p>This is just a list of what to turn in, it is not necessarily ordered by what you should do first. Pay close attention to the desired orientation of the arm and its reference frames.</p>
<ol>
<li>A urdf file for the robot arm.
<ul>
<li>Choose <span class="math inline">\(L_1\)</span> and <span class="math inline">\(L_2\)</span> such that <span class="math inline">\(L_1 \neq L_2\)</span>.</li>
<li>When <span class="math inline">\(\theta_1 = 0\)</span> and <span class="math inline">\(\theta_2 = 0\)</span>, the robot should be completely horizontal, with the coordinates of the end-effector (i.e., the tip of link 2) relative to the fixed frame being <span class="math inline">\((L_1 + L_2, 0, 0)\)</span>.</li>
<li>Each link should be a different color when displayed in <code>rviz</code>.</li>
<li>Each link should be visualized as a cylinder, whose height is the length of that link.</li>
<li>The model is purely kinematic, so no need to worry about inertias or collisions.</li>
<li>No need to worry about joint limits.</li>
<li>There should be a frame at the location of the robot's end-effector.</li>
<li>The arm should be in the <span class="math inline">\(xy\)</span> plane of your <code>&lt;Fixed Frame&gt;</code>.
<ul>
<li>In other words the robot is rotating in the plane of the "ground" since the z axis points up in rviz.</li>
<li>In <code>rviz</code> the x axis is red, y axis is green, and z axis is blue</li>
</ul></li>
<li>Each joint frame should have the <span class="math inline">\(z\)</span> axis pointing up and the <span class="math inline">\(x\)</span> axis pointing along the length of the arm.</li>
</ul></li>
<li>A launchfile that starts a <code>robot_state_publisher</code>, a <code>joint_state_publisher</code>, and <code>rviz</code>.
<ul>
<li>It should have an argument to choose between launching the <code>joint_state_publisher</code> with the <code>use_gui</code> parameter set or not launching the <code>joint_state_publisher</code> at all.</li>
<li>It should have an argument to optionally launch rviz.</li>
<li>If rviz is loaded, you should use the <code>-d</code> option to load a <code>.rviz</code> configuration file that you create to set up the fixed frame properly and make.</li>
<li>Remember to use <code>$(find)$</code> when referencing files stored in packages.</li>
</ul></li>
<li>A node that causes the end-effector to track the following trajectory: <span class="math display">\[
     x(t) = 0.9\cos\frac{2\pi t}{T} \sqrt{(L_1+L_2)^2 - h^2}  \\
     y(t) = \frac{2}{3}(L_1 + L_2)
  \]</span>
<ul>
<li>The trajectory should result in the end-effector moving back and forth in a straight line with a constant <span class="math inline">\(y\)</span> value</li>
<li>The node should read the parameters <span class="math inline">\(L_1\)</span>, <span class="math inline">\(L_2\)</span>, <span class="math inline">\(h\)</span> and <span class="math inline">\(T\)</span> from the parameter server</li>
<li>Unlike with the turtle trajectory, here you can specify joint angles directly by publishing <code>sensor_msg/JointState</code> messages on <code>joint_state</code>.
<ul>
<li>Therefore, you only need the inverse kinematics: no derivatives.</li>
</ul></li>
<li>You can derive the inverse kinematics, look them up (cite your source), or use <code>tf2</code> to compute them for you.</li>
<li>The locations on the trajectory should be published at a fixed frequency that results in the motion of the arm appearing smooth</li>
<li>Each joint state message has a header of type <code>std_msgs.msgs.Header</code>
<ul>
<li>set the stamp member to the current time before you send the message</li>
<li>seq is set automatically by the publisher</li>
<li>frame_id is used by <code>/tf</code> so it can also be left blank for JointState messages</li>
</ul></li>
<li>You need to choose <span class="math inline">\(h\)</span> such that the trajectory is achievable.</li>
</ul></li>
<li>A node that draws markers in <code>rviz</code> at the end-effector position.
<ul>
<li>One cycle should take <span class="math inline">\(T\)</span> seconds: you should read <span class="math inline">\(T\)</span> from the parameter server so you use the same value as in your trajectory node</li>
<li>The markers should fade away after <span class="math inline">\(\frac{T}{5}\)</span> seconds</li>
<li>The markers should be published at a fixed rate</li>
<li>You likely will need to publish these markers at a significantly slower rate than the trajectory updates because they can be slow to process.</li>
<li>You can use any shape you want</li>
<li>The color and shape should change if the <code>x</code> coordinate is positive or negative
<ul>
<li>You should get the position using a <code>tf</code> listener</li>
</ul></li>
</ul></li>
<li>A launchfile that lets you run all the nodes you've created and visualize the results. It should:
<ul>
<li>Use an <code>&lt;include&gt;</code> tag to load launchfile from step 2, launching rviz and the <code>robot_state_publisher</code> and either the <code>joint_state_publisher</code> or your trajectory generation node.</li>
<li>An option to run the node that sends the markers to rviz.</li>
<li>The launchfile should load <span class="math inline">\(L_1\)</span>, <span class="math inline">\(L_2\)</span> and <span class="math inline">\(T\)</span> into the parameter server from a yaml file called <code>arm.yaml</code></li>
<li>Hint: you may wish to write this launchfile incrementally, adding new <code>&lt;node&gt;</code> tasks for each node you create.</li>
</ul></li>
<li>A discussion in your <code>README.md</code> about what each launchfile and node is called and what it does. Comments in the docstring of each node should describe the ROS api for each node (publishers, subscribers, services, etc.).</li>
</ol>
<h1 id="the-xacro-arm">The Xacro Arm</h1>
<h2 id="git-2">Git</h2>
<ul>
<li>Do your work in this section on the "xacro" branch in git.</li>
<li>Be sure to push this branch to the remote repository.</li>
<li>When you are done, merge this into master</li>
<li>You may also merge periodically, as you achieve milestones in getting your turtle working</li>
</ul>
<h2 id="what-to-turn-in-2">What to turn in</h2>
<ol>
<li>Create a <code>.xacro</code> file based on the URDF in the previous section, that allows you to read the length of each arm from the <code>arm.yaml</code> file you used in the previous section
<ul>
<li>Your xacro file should be written such that when you change the parameters in the <code>arm.yaml</code> file you do not need to change anything else for the resulting <code>urdf</code> to work.</li>
<li>In <code>xacro</code>, <code>pi</code> is already defined so you should use it explicitly wherever you had to manually compute it in the urdf.</li>
<li>Modify the launchfile used in the previous section to load the <code>xacro</code> file instead of the <code>urdf</code></li>
</ul></li>
<li>Make two videos of a robot following the trajectory.
<ul>
<li>Each video should use different values of the parameters.</li>
<li>Include links to the videos in your <code>README.md</code></li>
</ul></li>
</ol>
<h1 id="bonus-question-optional-but-it-will-be-rewarding-to-complete">Bonus Question (optional, but it will be rewarding to complete)</h1>
<ol>
<li>Modify question 1 so the turtle can follow a trajectory specified by the user.
<ul>
<li>The user should provide two strings: the x position vs time and the y position vs time</li>
<li>You can then use <code>sympy</code> to perform the necessary computations to find expressions for <span class="math inline">\(v(t)\)</span> and <span class="math inline">\(\omega(t)\)</span>.</li>
</ul></li>
</ol>
</div>
<div class="footer">
Author: Matthew Elwin.
</div>
</div>
</div>

</body>
</html>
